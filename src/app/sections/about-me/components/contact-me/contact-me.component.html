<!-- contact-form.component.html -->
<form
  [formGroup]="contactMe"
  (ngSubmit)="onSubmit()"
  novalidate
  class="flex flex-col gap-4"
>
  <!-- name -->
  <div class="relative w-full group">
    <input
      id="name"
      type="text"
      formControlName="name"
      placeholder=" "
      class="block py-2.5 px-0 w-full text-sm text-black border-0 border-b-1 border-secondary-grey appearance-none focus:outline-none focus:ring-0 focus:border-black peer"
    />
    <label
      for="name"
      class="peer-focus:font-medium absolute text-sm text-secondary-dark-grey duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-focus:text-primary-orange peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
      >Your Name</label
    >
    <div
      class="error"
      *ngIf="
        contactMe.get('name')!.touched &&
        contactMe.get('name')!.hasError('required')
      "
    >
      Name is required
    </div>
  </div>

  <!-- email -->
  <div class="relative w-full group">
    <input
      id="email"
      type="email"
      formControlName="email"
      placeholder=" "
      required
      class="block py-2.5 px-0 w-full text-sm text-black border-0 border-b-1 border-secondary-grey appearance-none focus:outline-none focus:ring-0 focus:border-black peer"
    />
    <label
      for="email"
      class="peer-focus:font-medium absolute text-sm text-secondary-dark-grey duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-focus:text-primary-orange peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
      >Email address</label
    >

    <div
      class="text-sm text-red-600"
      *ngIf="
        contactMe.get('email')!.touched &&
        contactMe.get('email')!.hasError('required')
      "
    >
      Email is required
    </div>
    <div
      class="text-sm text-red-600"
      *ngIf="
        contactMe.get('email')!.touched &&
        contactMe.get('email')!.hasError('email')
      "
    >
      Invalid email format
    </div>
  </div>

  <!-- subject -->
  <div class="relative w-full group">
    <input
      id="subject"
      type="text"
      formControlName="subject"
      placeholder=" "
      required
      class="block py-2.5 px-0 w-full text-sm text-black border-0 border-b-1 border-secondary-grey appearance-none focus:outline-none focus:ring-0 focus:border-black peer"
    />
    <label
      for="subject"
      class="peer-focus:font-medium absolute text-sm text-secondary-dark-grey duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-focus:text-primary-orange peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
      >Subject</label
    >
    <div
      class="text-sm text-red-600"
      *ngIf="
        contactMe.get('email')!.touched &&
        contactMe.get('email')!.hasError('required')
      "
    >
      Subject is required
    </div>
  </div>

  <div class="relative w-full group">
    <textarea
      id="message"
      rows="2"
      formControlName="message"
      placeholder=" "
      class="block py-2.5 px-0 w-full text-sm text-black border-0 border-b-1 border-secondary-grey appearance-none focus:outline-none focus:ring-0 focus:border-black peer"
    ></textarea>
    <label
      for="message"
      class="peer-focus:font-medium absolute text-sm text-secondary-dark-grey duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-focus:text-primary-orange peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
      >Your message</label
    >
    <div
      class="error"
      *ngIf="
        contactMe.get('message')!.touched &&
        contactMe.get('message')!.hasError('required')
      "
    >
      Message is required
    </div>
  </div>

  <div class="flex">
    <div *ngIf="errorMessage" class="submit-error">
      <span>{{ errorMessage }}</span>
    </div>
    <div *ngIf="successMessage" class="submit-success">
      <span>{{ successMessage }}</span>
    </div>
  </div>

  <div class="flex">
    <button
      [disabled]="contactMe.invalid"
      type="submit"
      class="border border-secondary-grey hover:border-black px-2 py-1 transition-colors duration-200"
    >
      <span *ngIf="!loading">Send message</span>
      <span *ngIf="loading" class="flex items-center">
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
          class="fill-black"
        >
          <style>
            .spinner_ajPY {
              transform-origin: center;
              animation: spinner_AtaB 0.75s infinite linear;
            }
            @keyframes spinner_AtaB {
              100% {
                transform: rotate(360deg);
              }
            }
          </style>
          <path
            d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z"
            opacity=".25"
          />
          <path
            d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z"
            class="spinner_ajPY"
          />
        </svg>
        <span class="ml-2">Loading...</span>
      </span>
    </button>
  </div>
</form>
